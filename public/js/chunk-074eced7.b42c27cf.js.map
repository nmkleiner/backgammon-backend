{"version":3,"sources":["webpack:///./src/components/chat-cmp.vue?f903","webpack:///./src/components/chat-cmp.vue?0d70","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack:///./src/services/msg.service.js","webpack:///src/components/chat-cmp.vue","webpack:///./src/components/chat-cmp.vue?9af0","webpack:///./src/components/chat-cmp.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_cmp_vue_vue_type_style_index_0_id_16c16d54_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_cmp_vue_vue_type_style_index_0_id_16c16d54_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","class","input-focus","isInputFocus","ref","_l","msg","idx","key","attrs","nickname","directives","name","rawName","value","newMsg","expression","placeholder","autocomplete","autofocus","domProps","on","focus","toggleInputFocus","blur","input","$event","target","composing","$set","click","preventDefault","send","staticRenderFns","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","_objectSpread","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","msgs","getMsgs","createEmptyMsg","undefined","txt","from","roomJoin","roomName","socket","emit","disconnectFromRoom","msg_service","soldier","e","then","bind","chatMsg","chat_cmpvue_type_script_lang_js_","components","props","isChatOpen","Boolean","data","typeMsg","loading","methods","$socket","color","loggedInUser","pic","room","pushMsgToHistory","scrollToEnd","container","$refs","conversationRef","scrollHeight","scrollTop","$emit","$store","commit","created","_created","asyncToGenerator","regeneratorRuntime","mark","_callee","_this","wrap","_context","prev","next","dispatch","setTimeout","stop","apply","computed","getters","userName","sockets","renderMsg","sound_service","play","type","push","components_chat_cmpvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-074eced7.b42c27cf.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-cmp.vue?vue&type=style&index=0&id=16c16d54&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-cmp.vue?vue&type=style&index=0&id=16c16d54&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chat-cmp aside-card\"},[_c('div',{staticClass:\"conversation-container\"},[_c('div',{staticClass:\"empty\",class:{'input-focus': _vm.isInputFocus}}),_c('div',{ref:\"conversationRef\",staticClass:\"conversation\",class:{'input-focus': _vm.isInputFocus}},_vm._l((_vm.msgs),function(msg,idx){return _c('chat-msg',{key:idx,attrs:{\"msg\":msg,\"nickname\":_vm.nickname}})}),1),_c('form',{staticClass:\"conversation-compose\",class:{'input-focus': _vm.isInputFocus}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newMsg.txt),expression:\"newMsg.txt\"}],staticClass:\"border-bottom-input\",attrs:{\"placeholder\":\"Type a message\",\"autocomplete\":\"off\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.newMsg.txt)},on:{\"focus\":_vm.toggleInputFocus,\"blur\":_vm.toggleInputFocus,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newMsg, \"txt\", $event.target.value)}}}),_c('button',{staticClass:\"send-btn\",on:{\"click\":function($event){$event.preventDefault();return _vm.send($event)}}},[_c('i',{staticClass:\"far fa-comment\"})])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import ioClient from 'socket.io-client'\r\n\r\nconst msgs = [];\r\n\r\n\r\n\r\nconst getMsgs = () => {\r\n    return msgs;\r\n}\r\n\r\n\r\nfunction createEmptyMsg(nickname = 'john doe', txt = '') {\r\n    return { txt, from: nickname };\r\n}\r\n\r\n\r\nfunction roomJoin(roomName) {\r\n    socket.emit('chat room-joined', roomName)\r\n}\r\n\r\nfunction disconnectFromRoom(){\r\n    socket.emit('disconnect');\r\n}\r\n\r\nexport default {\r\n    getMsgs,\r\n    createEmptyMsg,\r\n    roomJoin,\r\n    disconnectFromRoom\r\n}\r\n\r\n\r\n\r\nfunction lorem(size = 5) {\r\n    let text = \"\";\r\n    const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\r\n\r\n    for (let i = 0; i < size; i++)\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n\r\n    return text;\r\n}\r\n","<template>\r\n  <section class=\"chat-cmp aside-card\">\r\n    <!-- <div class=\"empty\"></div> -->\r\n    <div class=\"conversation-container\">\r\n      <div :class=\"{'input-focus': isInputFocus}\" class=\"empty\"></div>\r\n      <div :class=\"{'input-focus': isInputFocus}\" class=\"conversation\" ref=\"conversationRef\">\r\n        <chat-msg v-for=\"(msg, idx) in msgs\" :key=\"idx\" :msg=\"msg\" :nickname=\"nickname\"/>\r\n      </div>\r\n\r\n      <form :class=\"{'input-focus': isInputFocus}\" class=\"conversation-compose\">\r\n        <textarea\r\n          v-model=\"newMsg.txt\"\r\n          @focus=\"toggleInputFocus\"\r\n          @blur=\"toggleInputFocus\"\r\n          class=\"border-bottom-input\"\r\n          placeholder=\"Type a message\"\r\n          autocomplete=\"off\"\r\n          autofocus\r\n        ></textarea>\r\n        <button class=\"send-btn\" @click.prevent=\"send\">\r\n          <i class=\"far fa-comment\"></i>\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport ioClient from \"socket.io-client\";\r\nimport msgService from \"../services/msg.service.js\";\r\nimport soundService from \"../services/sound.service.js\";\r\n\r\nconst soldier = () => import(\"./soldier\");\r\nconst chatMsg = () => import(\"./chat-msg\");\r\nexport default {\r\n  components: {\r\n    soldier,\r\n    chatMsg\r\n  },\r\n  props: {\r\n    isChatOpen: Boolean\r\n  },\r\n  data() {\r\n    return {\r\n      msgs: [],\r\n      newMsg: {},\r\n      typeMsg: \"\",\r\n      loading: true\r\n    };\r\n  },\r\n  methods: {\r\n    send() {\r\n      if (!this.newMsg.txt) return;\r\n      this.$socket.emit(\"assignMsg\", {\r\n        msg: {\r\n          ...this.newMsg,\r\n          from: this.nickname,\r\n          color: this.loggedInUser.color,\r\n          pic: this.loggedInUser.pic\r\n        },\r\n        room: 1\r\n      });\r\n      this.newMsg = msgService.createEmptyMsg(this.nickname);\r\n      this.pushMsgToHistory(this.newMsg);\r\n    },\r\n    scrollToEnd() {\r\n      var container = this.$refs.conversationRef;\r\n      var scrollHeight = container.scrollHeight;\r\n      container.scrollTop = scrollHeight;\r\n    },\r\n    // scrollIntoView() {\r\n    //   var container = this.$refs.conversationRef;\r\n    //   container.scrollIntoView();\r\n    // },\r\n    pushMsgToHistory(msg) {\r\n      this.$emit(\"pushMsgToHistory\", msg);\r\n    },\r\n    toggleInputFocus() {\r\n      this.$store.commit('toggleInputFocus')\r\n    }\r\n  },\r\n  async created() {\r\n    await this.$store.dispatch(\"getLoggedInUser\");\r\n    this.newMsg = msgService.createEmptyMsg(this.nickname);\r\n    const room = 1;\r\n    this.$socket.emit(\"chatJoined\", room);\r\n    setTimeout(() => (this.loading = false), 1200);\r\n  },\r\n  computed: {\r\n    loggedInUser() {\r\n      return this.$store.getters.loggedInUser;\r\n    },\r\n    nickname() {\r\n      return this.loggedInUser.userName ? this.loggedInUser.userName : \"guest\";\r\n    },\r\n    isInputFocus() {\r\n      return this.$store.getters.isInputFocus;\r\n    }\r\n  },\r\n  sockets: {\r\n    renderMsg(msg) {\r\n      soundService.play(\"msg\");\r\n      this.$store.commit({ type: \"setShowNotification\", value: true });\r\n      this.msgs.push(msg);\r\n      this.scrollToEnd()\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.chat-cmp {\r\n  .empty {\r\n    height: 65px;\r\n    &.input-focus {\r\n      height: 0;\r\n      @media (min-width: 850px) {\r\n        height: 65px;\r\n      }\r\n    }\r\n  }\r\n  .conversation-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    height: fit-content;\r\n    z-index: 10;\r\n    @media (min-width: 850px) {\r\n      width: 360px;\r\n    }\r\n    width: 100vw;\r\n  }\r\n\r\n  .conversation {\r\n    overflow: auto;\r\n    height: calc(100vh - 65px - 52px);\r\n    @media (min-width: 850px) {\r\n      height: 400px;\r\n    }\r\n\r\n    &.input-focus {\r\n      @media (max-width: 850px) {\r\n        height: calc(100vh);\r\n        z-index: 12;\r\n      }\r\n    }\r\n\r\n    padding: 0 15px 15px 15px;\r\n  }\r\n\r\n  .conversation-compose {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 3px 20px;\r\n    background-color: lighten(black, 10%);\r\n    width: 100%;\r\n    justify-content: flex-start;\r\n    z-index: 1;\r\n    @media (min-width: 850px) {\r\n      padding: 10px 20px;\r\n    }\r\n\r\n    &.input-focus {\r\n      align-items: flex-end;\r\n      position: fixed;\r\n      bottom: 0;\r\n      z-index: 12;\r\n      @media (min-width: 500px) {\r\n        height: 100vh;\r\n      }\r\n      @media (min-width: 850px) {\r\n        height: unset;\r\n        position: unset;\r\n      }\r\n\r\n      .border-bottom-input {\r\n        outline: none;\r\n      }\r\n    }\r\n\r\n    textarea.border-bottom-input {\r\n      height: unset;\r\n      width: 70%;\r\n      @media (min-width: 850px) {\r\n        height: unset;\r\n      }\r\n    }\r\n\r\n    .send-btn {\r\n      padding: 7px;\r\n      width: 46px;\r\n      height: 46px;\r\n      background-color: darken(#25d366, 20%);\r\n      border: none;\r\n      color: darken(white, 15%);\r\n      border-radius: 50%;\r\n      outline: 0;\r\n      font-size: 16px;\r\n      margin-left: 25px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-cmp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat-cmp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat-cmp.vue?vue&type=template&id=16c16d54&scoped=true&\"\nimport script from \"./chat-cmp.vue?vue&type=script&lang=js&\"\nexport * from \"./chat-cmp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat-cmp.vue?vue&type=style&index=0&id=16c16d54&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16c16d54\",\n  null\n  \n)\n\ncomponent.options.__file = \"chat-cmp.vue\"\nexport default component.exports"],"sourceRoot":""}